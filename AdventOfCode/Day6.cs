using System;
using System.Collections.Generic;
using System.Linq;
using MoreLinq;

namespace AdventOfCode
{
    public class Day6
    {
        public void DoItA()
        {
            var lines = input.Split(new[] {"\r\n"}, StringSplitOptions.None);

            string result = "";
            for (int i = 0; i < lines[0].Length; i++)
            {
                result += MostCommon(lines.Select(l => l[i]));
            }
        }

        public static char MostCommon(IEnumerable<char> line)
        {
            var ret = from i in line
                      group i by i
                into g
                orderby g.Count() descending 
                select g.Key;
            return ret.First();
        }

        public void DoItB()
        {
            var lines = input.Split('\n');

            var q = from l in lines.SelectMany(l => MoreEnumerable.Index<char>(l.ToCharArray()))
                group l by l.Key into g
                select new {g.Key, chr= LeastCommon(g.Select(ab => ab.Value))};

            var result = new string(q.OrderBy(a => a.Key).Select(b => b.chr).ToArray());
        }

        public static char LeastCommon(IEnumerable<char> input)
        {
            var ret = from i in input
                group i by i
                into g
                orderby g.Count() //descending 
                select g.Key;
            return ret.First();
        }

        private const string testInput = @"eedadn
drvtee
eandsr
raavrd
atevrs
tsrnev
sdttsa
rasrtv
nssdts
ntnada
svetve
tesnvt
vntsnd
vrdear
dvrsen
enarar";

        private const string input = @"kzuhjtiu
avmoymrl
ooiuzmse
thjosnvt
rgukkzvw
ngiumlei
ypecygjb
vkypflkc
ycfematk
fuziupzq
wencklrw
bfrjzflc
fikjplet
xamkbgpl
ssvvomhl
zixludnr
gvwceyxu
ycazlsiu
crppmvek
bkhbmzig
hlvjgybm
bebrkdug
aqwriopt
vfmxjthr
qcfumqoo
cnslcxkj
whjoqatd
zppyyrid
anoxsmnm
usgkdorj
zauqzrih
rkjoqwxp
uorcdgrx
sarynvbe
qbxjymvo
ilykopgt
lkfbcacj
iwbbrpqg
hbutgqgf
yuyhccsb
tfshukcj
svrzcnhe
rufpdkgr
jlacxosa
jojaebdy
ljhlucod
vfmtlrkg
hmgvlsmi
xrbtfncl
dczahpsj
gehbzbjx
akfnfpdb
cxlajgqi
johxtvtl
kuknyycu
doocnijs
uulmayiz
ehkwoiym
etcwlwkr
fzsrlvlp
wedhgevn
pvzlmuak
nqwesqnb
tfysfqlg
wftvhlph
ijytsxvl
gpcusnok
jkxmmzqu
weuycmyh
ylokounh
xgcwhkzs
gwaxfnym
ebtommlo
zovodvxt
vulmffvv
utyvwzoj
yxcqylld
npgopbjr
fsgubdod
kqxxmlqx
qpufmuiz
dwcxikwh
yhfxever
tdqsorgn
fujusvbk
skeilnco
vnjamqwk
ocsdrafb
mpbhvhsj
vwkddrov
zslzzpqa
owoduiko
lcbadwmb
flenfdlh
pxstzvlg
amzxqzgl
jmrzrhpp
npstyeoc
btdkzgpq
npvgdqsd
fsqyzsjc
ckamszqr
pxdunhzr
natfwmmr
arcrqdyh
hjtledhq
rzlwgkdb
vjstsayt
spqfwtod
zjdrabmi
lbgtzkqn
yylrtkhp
lmnfnlyj
unnsbhwu
tbgvrwmk
wmqvphio
dxtqdzjc
ssmxelji
lpchojhs
qztfidhh
ascwwupj
qtpjutih
wxblizca
kyrxrill
raauetcl
kffpczyp
fpzfrmmz
hndftzck
doshupyz
ppnvdzov
oixcfhfe
womdqhbu
jfjzhxmj
sdxspwgn
pacctjrd
rbvkuipa
oqqdoqpm
tipjsyaq
fkhwgypp
ruifxbrx
akmgpyna
jgtxlsfj
ngwgobvo
ohgcnppm
kxfpgxdp
jfsymwtz
laakiasf
yqmllafa
wtjkdxml
nnekcevz
btpqbgtq
ejwgghky
vwomilgh
fbjlnzvu
jroswmwf
uoiqnszt
yselwyvf
naipzpmq
nqfffbnb
xanbgyft
sabhdofz
ivsvzuxw
ahtfcijd
svnufhlf
kbesriek
qggmmxud
yyklynwn
iochuteq
uuqymfzn
pqvdqgiv
lxkidikd
weyoaozn
czcbnqqf
mqxdzdud
xaoaepob
zqtjatvx
ybvguzoq
cfnkpata
owfsfdax
izgealat
ymipkwwg
wnpgxesg
ksnxxcxv
jclzowfv
duaywclu
milgzzoc
nkbzvfzb
phceixso
dxhruaie
xzgdvjwp
hziqyirx
dqkrmifd
oxkvbscb
xgiqvuhq
iswmjvwn
zmgutgrc
qwtjnngf
irscjfpf
fjattgtx
hbbzaskc
ajjxonyb
hjqrwipy
jhmvjbjc
lmycsels
fgrmkjrr
lcgtjzso
drdbanrd
bfcmpaec
xyuospwo
ondpxivu
awwbvugg
lynqeyze
klrbkdsn
plvsebhe
zgvtzzfj
ntxufsug
lgnagfrt
zrfqcoyn
bbnaxotu
xdfnrige
relscolz
gvtaimxx
tzqmtqqg
xvlpdjqo
kwaiixca
zrrthkka
ilwodhkk
lmkvhtns
gksnzcxy
slydcwel
gvazmrnn
jxwjredl
mfdoyzvb
zsjaqqpw
xdnehbns
mdwvtvpg
qchdoolo
qqueggbo
kvejknhn
zvmuawry
wdaphdrp
uqvqwrat
seocgxcy
cmfaltkm
eizjyuny
wauyrtjd
msofphvf
ehhrinzp
rvdxceti
ucqojfkj
vyogwxca
lpzwlvsj
eipwrkaw
hrvssisz
tjweqwuf
jxpsghum
ndklxswg
epqhtexo
lxarhhrc
bvvnfkpp
nqtubzmf
bvywjvhy
vwxcdurw
qchvcsdp
ssddxsqo
tvmnzeih
eriekhkj
tdagxotn
fhmptjgy
gmgumxfy
kxroxyjy
tzzwhgwd
bpxlgtxh
rhqckdhe
mhrfducn
upehhwcw
hiuitciw
wmqikhks
pfkfcfon
ibayinjf
gyonamns
piidubgm
jwjnkntm
qtpejlga
tdxjzfzs
zrnjnhsr
mderxneh
ykrdpkjv
tutgjuyo
imfgylmw
uleeqvqq
dmqrxewd
kutklati
qhloprfw
vyjsvkby
ktpypjhg
krtqsqdv
kestthkm
mmyelvby
uicxbnzo
fbeeqhtd
qyljilqs
vzvaisds
glltfgez
hslaurzq
pvmpndhx
qjpcsdzn
enusitnz
przexagp
gqsjtshx
tojpvqxm
ajrzrmav
dpygasci
ekkipsxn
ivagdrag
uusiocdp
zupdvkmm
hzykfaow
anezxfnr
cezhheci
rohplzjx
mhjpnggj
biqpkggx
tjqovfui
virjhgku
oiqigxxa
oczvaubi
grlyfisi
dnreeqls
awtmxyfu
ekwwiqfy
fvpquajn
nhfrrduu
gckaequp
vcnotbng
rlmqudai
sjbtzptp
fssetlef
juvqmozk
egwihfmb
aycbtxwg
eeinewpe
qnrljmel
ojtwijbq
ojglpxvg
okmssqmz
biwmbclg
qbcyoeyv
ibzljibu
irivznmc
joghyeuq
lehhevzk
nypdsavy
ltwgxozd
dhdcvekn
etukwfrh
mecdcgfk
pxeffoie
repfaunk
cggbikui
mlkiikwe
yogupckh
prslodhm
snwifrez
ezbdhyze
lyujcknw
xpbubsbs
pupazben
mhbefbwr
covtcxuv
pdivxcpc
efljebov
slpzlykk
mgdzhdxi
pswxumzl
fsktpndt
bcsbqqpr
jrcsbpmt
znjzuwfj
vvyebpwr
irtkvuxf
bjmirtex
ctwpohcp
mzhfgwup
yifbbawo
ysmkcxwr
hdilqqam
sdzxfoua
znipjpov
bbensgdz
xxbwnavx
nsecnplc
cynmewjl
xenyeshm
iijnxxoe
udheymlr
iflbvrgj
jmwwssvk
bxmwksdk
mcjnzulf
hdztyosx
oacnhrti
lgkzroxw
hgrhloyh
ljwchrcg
snoivbyo
zifbvzuy
zdiyklta
zlxrbtko
itognojc
uukpavnr
gfeqbwpr
cqediytq
qshrmmab
swfvqevt
eeinnjhh
fyiwkxaf
wbiompul
qdyljrqw
hbyybefc
debxacnw
jtcndbre
wnonjsms
mynferiq
bsdheygu
ctxpqjtv
zwogocti
ithytgny
hcfzukoy
vkbbayvw
oratkqbl
paaxdtzq
ihbyepsm
pcrbpjah
rdywnvjf
bwqwjeau
yzvaytxs
tzobtjlx
nmpuehdt
cozmwviz
jjsgugpg
hfnufbfy
mimsvfup
uckxsvmt
niuvdfga
rzqnhtzg
swcovahs
rpaiolqw
gkzirknt
tmenbuze
wlswxcui
ajrzbngd
qnagqzbk
keissvdu
xgzauudn
ucxqjyxw
mjhebxew
hfcsihjz
haowlpht
awtyuxes
yvlscnor
wjvnrvdk
vyjrofzl
mwvqhdsr
tmjtvmcm
txedbgbl
bdbyvjka
gflogcxf
yutkwtwb
ufowkutk
poztefiy
vzokwdbd
lswgkqbw
uqdgisvs
oucvypnf
ltkglpkw
zmxepsdq
qkeinhjv
dbrbejia
ibvmmlvw
cqbyopme
cofowdbs
fqxadbdc
dhrhqbwl
yzgzxtay
kafatfsb
ctoanqfw
voxqoccb
bkayknan
vcbznmxv
xammavqx
mnddrwih
ctclwzqm
kfopcomi
fktmgwnc
gmobfjct
unfxsjaz
vjddnxel
gmucjbsa
hpgmwwpz
euuksjop
agtvtiur
rqvzvlfj
wrsibitj
nlsjycsm
tzwjqbbe
ikgtqyla
tyooafyq
kulhqrqh
aymwwiji
olazvgmc
qlbfpnuk
siduwyou
onbdacup
zhucqobq
gfynsukb
ewglgrmv
teulwkoc
wdarqsos
rodfyiau
ugscrfwx
cskdtjeb
rhpbewaf
kvuhnfxi
ulubdyna
ybjqaiek
cygmgqco
wmxejcqi
bnxazupy
veikhwro
ehqjweal
pmhgadgt
ddpiqeyz
xiiulgvs
rdlsfjxv
xgeilzdv
noxpwtet
rwkijawj
gieqojll
jxyfkcav
ftvrbjmx
wxhscubc
xqzsvalt
oaipwrzg
qoyvpjho
sxhrytfm
tqxbayiz
phyrkram
crxfrhlq
xaqilmia
uxdjurrv
reukythc
ndufcmiq
fikuxiut
kpzmbejp
bfhrmkdm
oujmakta
gcactdth
unzgcgxu
goyaykrx
qanwpyrx
eyvmucmw
dvufvfyy
xznzpoge
kemercpf
hthqpefq
dthqykev
jyzcxlee
pxpslaiv
owtkzmqp
wlpiplgi
agzqkpyc
lpnuiohf
dgdnredu
sgykrusb
eldlktfn
opqvzjjx
daqvvwyj
mtjjdrbu
hbdxoaqz
xrlztquk
vckagcra
cglegsbs
buvhlfxh
xbgmxrqb
gkmyqxde
iapyhadd
aqetglaq
jynnbewj
nzhhoxyd
dlrhmmyb
aarvjibz
fywlhvyr
mebhglss
svdxjorh
yzxunnce
arnolbyf
dqfriuqe";
    }
}